% Problem: tests.theorems.ehr_phenotyping
fof(axiom1, axiom, ! [Patient_id, Encounter_id] : ((patient(Patient_id, date(1970, 1, 1), 'unknown') & encounter(Encounter_id, Patient_id, date(2024, 1, 1)) & diagnosis(Encounter_id, Code(ICD10, E11))) => diabetest2(Patient_id, None))).
fof(axiom2, axiom, ! [Patient_id, Encounter_id, Child_code] : ((patient(Patient_id, date(1970, 1, 1), 'unknown') & encounter(Encounter_id, Patient_id, date(2024, 1, 1)) & diagnosis(Encounter_id, Code(ICD10, ?child_code)) & isa(Code(ICD10, ?child_code), Code(ICD10, E11))) => diabetest2(Patient_id, None))).
fof(axiom3, axiom, ! [Patient_id, V] : ((patient(Patient_id, date(1970, 1, 1), 'unknown') & labresult(Patient_id, date(2024, 1, 1), Code(LOINC, 4548-4), V, '%') & ge(V, 6.5)) => diabetest2(Patient_id, 0.9))).
fof(axiom4, axiom, ! [Patient_id] : ((patient(Patient_id, date(1970, 1, 1), 'unknown') & medication(Patient_id, date(2024, 1, 1), Code(SNOMED, 10370), None)) => diabetest2(Patient_id, 0.7))).
fof(axiom5, axiom, ! [Patient_id, Encounter_id] : ((patient(Patient_id, date(1970, 1, 1), 'unknown') & encounter(Encounter_id, Patient_id, date(2024, 1, 1)) & diagnosis(Encounter_id, Code(ICD10, I10))) => hypertension(Patient_id, None))).
fof(axiom6, axiom, ! [Patient_id, Systolic, Diastolic] : ((patient(Patient_id, date(1970, 1, 1), 'unknown') & labresult(Patient_id, date(2024, 1, 1), Code(LOINC, 8480-6), Systolic, 'mmHg') & labresult(Patient_id, date(2024, 1, 1), Code(LOINC, 8462-4), Diastolic, 'mmHg') & ge(Systolic, 140) & ge(Diastolic, 90)) => hypertension(Patient_id, 0.8))).
fof(axiom7, axiom, ! [Patient_id, Encounter_id] : ((patient(Patient_id, date(1970, 1, 1), 'unknown') & encounter(Encounter_id, Patient_id, date(2024, 1, 1)) & diagnosis(Encounter_id, Code(ICD10, N18))) => ckd(Patient_id, None, None))).
fof(axiom8, axiom, ! [Patient_id, Value] : ((patient(Patient_id, date(1970, 1, 1), 'unknown') & labresult(Patient_id, date(2024, 1, 1), Code(LOINC, 62238-1), Value, 'mL/min/1.73mÂ²')) => ((ge(Value, 90) => ckd(Patient_id, 1, 0.5)) & (~ge(Value, 90) => ((ge(Value, 60) => ckd(Patient_id, 2, 0.7)) & (~ge(Value, 60) => ((ge(Value, 30) => ckd(Patient_id, 3, 0.9)) & (~ge(Value, 30) => ((ge(Value, 15) => ckd(Patient_id, 4, 0.95)) & (~ge(Value, 15) => ckd(Patient_id, 5, 0.99))))))))))).
fof(axiom9, axiom, ! [Patient_id] : ((diabetest2(Patient_id, None) & hypertension(Patient_id, None)) => (diabetest2(Patient_id, 1.0) & hypertension(Patient_id, 1.0)))).
fof(axiom10, axiom, ! [Patient_id, Confidence] : (diabetest2(Patient_id, Confidence) => phenotype(Patient_id))).
fof(axiom11, axiom, ! [Patient_id, Confidence] : (hypertension(Patient_id, Confidence) => phenotype(Patient_id))).
fof(axiom12, axiom, ! [Patient_id, Stage, Confidence] : (ckd(Patient_id, Stage, Confidence) => phenotype(Patient_id))).